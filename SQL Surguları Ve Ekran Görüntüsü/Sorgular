-- Veri Doğrulama: CHECK, UNIQUE, DEFAULT Kısıtlamaları hakkın da örnek SQL kodları:

--1. CHECK ile yaş doğrulaması örneği:
CREATE TABLE Ogrenci (
    OgrenciID INT IDENTITY(1,1) PRIMARY KEY,
    Ad NVARCHAR(50),
    Yas INT CHECK (Yas >= 17)
);

--2. UNIQUE ile öğrenci numarası kontrolü örneği:
CREATE TABLE Kayit (
    KayitID INT IDENTITY(1,1) PRIMARY KEY,
    OgrenciNo NVARCHAR(20) UNIQUE
);

--3. DEFAULT ile kayıt tarihi tanımlama örneği:
CREATE TABLE Basvuru (
    BasvuruID INT IDENTITY(1,1) PRIMARY KEY,
    BasvuruTarihi DATE DEFAULT GETDATE()
);

--4. CHECK ile maaş doğrulaması örneği:
CREATE TABLE Personel (
    PersonelID INT IDENTITY(1,1) PRIMARY KEY,
    AdSoyad NVARCHAR(100),
    Maas INT CHECK (Maas BETWEEN 8500 AND 100000)
);

--5. UNIQUE ile telefon numarası eşsizliği örneği:
CREATE TABLE Musteri (
    MusteriID INT IDENTITY(1,1) PRIMARY KEY,
    Telefon NVARCHAR(15) UNIQUE
);

--6. DEFAULT ile varsayılan kullanıcı rolü örneği:
CREATE TABLE Kullanici (
    KullaniciID INT IDENTITY(1,1) PRIMARY KEY,
    KullaniciAdi NVARCHAR(50),
    Rol NVARCHAR(20) DEFAULT 'Uye'
);

--7. CHECK ile not aralığı kontrolü örneği:
CREATE TABLE Notlar (
    NotID INT IDENTITY(1,1) PRIMARY KEY,
    Vize INT CHECK (Vize BETWEEN 0 AND 100),
    Final INT CHECK (Final BETWEEN 0 AND 100)
);

--8. DEFAULT ile varsayılan aktiflik durumu örneği:
CREATE TABLE Abone (
 AboneID INT IDENTITY(1,1) BIRINCIL ANAHTAR,
 AdSoyad NVARCHAR(100),
 Aktif BIT VARSAYILAN 1
);

--9. EŞSİZ ile kimlik numarası kontrolü örneği:
TABLO Vatandaları OLUŞTURUN (
 TCKN CHAR(11) BENZERSIZ,
 AdSoyad NVARCHAR(100)
);

--10. CHECK ile e-posta uzunluk kontrolü örneği:
TABLO OLUŞTUR İletişim (
 IletisimID INT KİMLİĞİ(1,1) BİRİNCİL ANAHTAR,
 Eposta NVARCHAR(100) KONTROL (LEN(Eposta) >= 5)
);


--OrderServiceImpl sınıfına ait stored procedure işlemleri:

--1- Ürün stok adedini kontrolü:
PROSEDÜR OLUŞTUR CheckStock
 @ProductID INT
OLARAK
BAŞLAMAK
 Ürün Kimliğin Bulunduğu Ürünlerden Stok Seçiniz = @ProductID;
OĞLUM;

--2- Ürün satıldıktan sonra stok miktarını azaltan:
PROSEDÜR OLUŞTURUN ReduceStock
 @ProductID INT,
 @Quantity INT
OLARAK
BAŞLAMAK
 UPDATE Ürünleri
 SET Stok = Stok - @Quantity
 WHERE ProductID = @ProductID VE Stock >= @Quantity;
OĞLUM;


--3- Sipariş oluşturulduysa tebliği bilgisini sıkaran:
PROSEDÜR OLUŞTUR SiparişBildirim
 @OrderID INT
OLARAK
BAŞLAMAK
 @UserID INT'yi BİLDİRİN;
 @UserID = UserID'i Siparişlerin Neresinden SEÇİN OrderID = @OrderID;

 @UserID NULL DEĞİLSE
 PRINT 'Sipariş oluşturuldu. Kullanıcıya bildirim gönderildi.';
 BAŞKA
 YAZDIR 'Sipariş bulunamadı.';
OĞLUM;
